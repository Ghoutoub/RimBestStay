<!-- ============================================================
  CHAMBRE ADD ‚Äî Formulaire Premium Complet
  ============================================================ -->

<div class="row justify-content-center">
  <div class="col-xl-10">

    <!-- Header -->
    <div class="d-flex justify-content-between align-items-center mb-4 animate-fadeInUp">
      <div>
        <h1 class="h3 fw-bold text-main mb-1">
          <i class="bi bi-plus-circle me-2 text-primary"></i>
          Nouvelle Chambre
        </h1>
        <p class="text-muted mb-0 small">
          H√¥tel : <span class="fw-semibold text-primary text-decoration-underline">{{ hotel?.nom || ('#' + hotelId)
            }}</span>
        </p>
      </div>
      <a [routerLink]="['/chambre/list', hotelId]" class="btn btn-outline-secondary rounded-pill px-4">
        <i class="bi bi-arrow-left me-1"></i> Retour list
      </a>
    </div>

    <!-- Alerts -->
    <div *ngIf="errorMsg" class="alert d-flex align-items-center gap-2 border-0 rounded-3 mb-4 animate-fadeIn"
      style="background:rgba(220,38,38,.08);color:#b91c1c;border-left:4px solid #ef4444 !important;">
      <i class="bi bi-exclamation-triangle-fill fs-5"></i>
      <span>{{ errorMsg }}</span>
    </div>
    <div *ngIf="okMsg" class="alert d-flex align-items-center gap-2 border-0 rounded-3 mb-4 animate-fadeIn"
      style="background:rgba(5,150,105,.08);color:#047857;border-left:4px solid #10b981 !important;">
      <i class="bi bi-check-circle-fill fs-5"></i>
      <span>{{ okMsg }}</span>
    </div>

    <!-- FORM -->
    <form [formGroup]="form" (ngSubmit)="submit()">

      <!-- ‚îÄ‚îÄ Section 1 : Informations de Base ‚îÄ‚îÄ -->
      <div class="premium-card mb-4">
        <div class="p-4 border-bottom" style="border-color: rgba(14,165,233,.08) !important;">
          <h5 class="section-title mb-0">
            <i class="bi bi-info-circle text-primary"></i>
            Informations de Base
          </h5>
        </div>
        <div class="p-4">
          <div class="row g-4">

            <div class="col-md-4">
              <label class="form-label fw-semibold">Num√©ro de chambre *</label>
              <div class="input-group">
                <span class="input-group-text"><i class="bi bi-hash"></i></span>
                <input type="text" class="form-control" formControlName="numero" placeholder="Ex: 101, A-12">
              </div>
              <div class="text-danger small mt-1"
                *ngIf="form.get('numero')?.touched && form.get('numero')?.errors?.['required']">
                Ce champ est obligatoire.
              </div>
            </div>

            <div class="col-md-4">
              <label class="form-label fw-semibold">Type de chambre *</label>
              <select class="form-select" formControlName="type">
                <option value="SINGLE">üõèÔ∏è Single</option>
                <option value="DOUBLE">üõèÔ∏èüõèÔ∏è Double</option>
                <option value="SUITE">‚ú® Suite</option>
                <option value="FAMILLE">üë®‚Äçüë©‚Äçüëß Famille</option>
              </select>
            </div>

            <div class="col-md-4">
              <label class="form-label fw-semibold">Statut initial</label>
              <select class="form-select" formControlName="statutNettoyage">
                <option value="PROPRE">‚úÖ Propre</option>
                <option value="EN_NETTOYAGE">üßπ En nettoyage</option>
                <option value="EN_MAINTENANCE">üîß En maintenance</option>
              </select>
            </div>

            <div class="col-md-3">
              <label class="form-label fw-semibold">Capacit√© *</label>
              <div class="input-group">
                <span class="input-group-text"><i class="bi bi-people"></i></span>
                <input type="number" class="form-control" formControlName="capacite">
              </div>
            </div>

            <div class="col-md-3">
              <label class="form-label fw-semibold">Superficie (m¬≤)</label>
              <div class="input-group">
                <span class="input-group-text"><i class="bi bi-rulers"></i></span>
                <input type="number" class="form-control" formControlName="superficie" placeholder="Optionnel">
              </div>
            </div>

            <div class="col-md-3">
              <label class="form-label fw-semibold">Nombre de lits</label>
              <div class="input-group">
                <span class="input-group-text"><i class="bi bi-moon"></i></span>
                <input type="number" class="form-control" formControlName="nombreLits">
              </div>
            </div>

            <div class="col-md-3">
              <label class="form-label fw-semibold">Type de lits</label>
              <select class="form-select" formControlName="typeLits">
                <option value="">‚Äî Non sp√©cifi√© ‚Äî</option>
                <option value="SIMPLE">Simple</option>
                <option value="DOUBLE">Double</option>
                <option value="KING">King Size</option>
                <option value="QUEEN">Queen Size</option>
                <option value="TWIN">Twin (2 lits)</option>
              </select>
            </div>

            <div class="col-md-6">
              <label class="form-label fw-semibold">Vue</label>
              <select class="form-select" formControlName="vueType">
                <option value="">‚Äî Non sp√©cifi√©e ‚Äî</option>
                <option value="MER">üåä Vue mer</option>
                <option value="JARDIN">üåø Vue jardin</option>
                <option value="MONTAGNE">‚õ∞Ô∏è Vue montagne</option>
                <option value="PISCINE">üèä Vue piscine</option>
                <option value="VILLE">üèôÔ∏è Vue ville</option>
              </select>
            </div>

            <div class="col-12">
              <label class="form-label fw-semibold">Description</label>
              <textarea class="form-control" rows="3" formControlName="description"
                placeholder="D√©crivez la chambre..."></textarea>
            </div>

          </div>
        </div>
      </div>

      <!-- ‚îÄ‚îÄ Section 2 : Tarification ‚îÄ‚îÄ -->
      <div class="premium-card mb-4">
        <div class="p-4 border-bottom" style="border-color: rgba(14,165,233,.08) !important;">
          <h5 class="section-title mb-0">
            <i class="bi bi-cash-coin text-success"></i>
            Tarification
          </h5>
        </div>
        <div class="p-4">
          <div class="row g-4">

            <div class="col-md-3">
              <label class="form-label fw-semibold">Prix par nuit (MRU) *</label>
              <div class="input-group">
                <span class="input-group-text"><i class="bi bi-moon-stars"></i></span>
                <input type="number" class="form-control" formControlName="prixParNuit">
              </div>
            </div>

            <div class="col-md-3">
              <label class="form-label fw-semibold">Prix weekend (MRU)</label>
              <div class="input-group">
                <span class="input-group-text"><i class="bi bi-calendar-weekend"></i></span>
                <input type="number" class="form-control" formControlName="prixWeekend" placeholder="Optionnel">
              </div>
            </div>

            <div class="col-md-3">
              <label class="form-label fw-semibold">Taxe de s√©jour (MRU)</label>
              <div class="input-group">
                <span class="input-group-text"><i class="bi bi-receipt"></i></span>
                <input type="number" class="form-control" formControlName="taxeSejour" placeholder="0">
              </div>
            </div>

            <div class="col-md-3">
              <label class="form-label fw-semibold">D√©p√¥t garantie (MRU)</label>
              <div class="input-group">
                <span class="input-group-text"><i class="bi bi-shield-check"></i></span>
                <input type="number" class="form-control" formControlName="depotGarantie" placeholder="0">
              </div>
            </div>

          </div>
        </div>
      </div>

      <!-- ‚îÄ‚îÄ Section 3 : √âquipements ‚îÄ‚îÄ -->
      <div class="premium-card mb-4">
        <div class="p-4 border-bottom" style="border-color: rgba(14,165,233,.08) !important;">
          <h5 class="section-title mb-0">
            <i class="bi bi-stars text-warning"></i>
            √âquipements & Confort
          </h5>
        </div>
        <div class="p-4">
          <div class="row g-3 mb-4">

            <div class="col-md-4 col-6">
              <div class="p-3 rounded-3 d-flex align-items-center gap-3 border transition-all"
                [style.background]="form.value.salleBainPrivee ? 'rgba(14,165,233,.06)' : '#fff'"
                [style.borderColor]="form.value.salleBainPrivee ? 'rgba(14,165,233,.3)' : 'rgba(0,0,0,.1)'">
                <input type="checkbox" class="form-check-input" id="salleBain" formControlName="salleBainPrivee"
                  style="width:20px;height:20px;">
                <label class="form-check-label fw-medium" for="salleBain">Salle de bain priv√©e</label>
              </div>
            </div>

            <div class="col-md-4 col-6">
              <div class="p-3 rounded-3 d-flex align-items-center gap-3 border transition-all"
                [style.background]="form.value.climatisation ? 'rgba(14,165,233,.06)' : '#fff'"
                [style.borderColor]="form.value.climatisation ? 'rgba(14,165,233,.3)' : 'rgba(0,0,0,.1)'">
                <input type="checkbox" class="form-check-input" id="clim" formControlName="climatisation"
                  style="width:20px;height:20px;">
                <label class="form-check-label fw-medium" for="clim">Climatisation</label>
              </div>
            </div>

            <div class="col-md-4 col-6">
              <div class="p-3 rounded-3 d-flex align-items-center gap-3 border transition-all"
                [style.background]="form.value.television ? 'rgba(14,165,233,.06)' : '#fff'"
                [style.borderColor]="form.value.television ? 'rgba(14,165,233,.3)' : 'rgba(0,0,0,.1)'">
                <input type="checkbox" class="form-check-input" id="tv" formControlName="television"
                  style="width:20px;height:20px;">
                <label class="form-check-label fw-medium" for="tv">T√©l√©vision</label>
              </div>
            </div>

            <div class="col-md-4 col-6">
              <div class="p-3 rounded-3 d-flex align-items-center gap-3 border transition-all"
                [style.background]="form.value.wifi ? 'rgba(14,165,233,.06)' : '#fff'"
                [style.borderColor]="form.value.wifi ? 'rgba(14,165,233,.3)' : 'rgba(0,0,0,.1)'">
                <input type="checkbox" class="form-check-input" id="wifi" formControlName="wifi"
                  style="width:20px;height:20px;">
                <label class="form-check-label fw-medium" for="wifi">Wi-Fi</label>
              </div>
            </div>

            <div class="col-12 mt-4">
              <label class="form-label fw-semibold">Autres √©quipements</label>
              <textarea class="form-control" rows="2" formControlName="equipementsChambre"
                placeholder="Minibar, Coffre-fort, etc."></textarea>
            </div>

          </div>
        </div>
      </div>

      <!-- ‚îÄ‚îÄ Section 4 : Images ‚îÄ‚îÄ -->
      <div class="premium-card mb-4">
        <div class="p-4 border-bottom" style="border-color: rgba(14,165,233,.08) !important;">
          <h5 class="section-title mb-0">
            <i class="bi bi-images text-primary"></i>
            Photos de la Chambre
          </h5>
        </div>
        <div class="p-4 text-center">
          <div class="border-2 rounded-3 p-5"
            style="border: 2px dashed rgba(14,165,233,.3); background: rgba(14,165,233,.02); cursor: pointer;"
            (click)="fileInput.click()">
            <input #fileInput type="file" accept="image/*" multiple class="d-none" (change)="onFileSelected($event)">
            <i class="bi bi-cloud-upload fs-1 text-primary mb-2 d-block"></i>
            <p class="fw-semibold text-main mb-1">Ajouter des photos</p>
            <p class="text-muted small">Cliquez ici ou glissez vos images</p>
          </div>

          <!-- Pr√©visualisation -->
          <div *ngIf="imagePreviews.length > 0" class="mt-4">
            <div class="row g-3">
              <div *ngFor="let p of imagePreviews" class="col-lg-2 col-md-3 col-4">
                <div class="rounded-3 overflow-hidden shadow-sm" style="aspect-ratio: 1/1;">
                  <img [src]="p" class="w-100 h-100" style="object-fit: cover;">
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- ‚îÄ‚îÄ Boutons ‚îÄ‚îÄ -->
      <div class="d-flex justify-content-end gap-3 py-4">
        <a [routerLink]="['/chambre/list', hotelId]" class="btn btn-outline-secondary rounded-pill px-5">
          Annuler
        </a>
        <button type="submit" class="btn btn-premium-gradient rounded-pill px-5 py-2 shadow fw-bold"
          [disabled]="loading || form.invalid">
          <span *ngIf="loading" class="spinner-border spinner-border-sm me-2"></span>
          <i *ngIf="!loading" class="bi bi-check-lg me-2"></i>
          {{ loading ? 'Enregistrement...' : 'Enregistrer la Chambre' }}
        </button>
      </div>

    </form>

  </div>
</div>