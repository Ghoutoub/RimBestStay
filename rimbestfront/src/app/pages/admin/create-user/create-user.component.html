<div class="card shadow">
    <div class="card-header bg-primary text-white">
        <h4 class="mb-0"><i class="bi bi-person-plus"></i> Créer un nouvel utilisateur</h4>
    </div>
    <div class="card-body">
        <!-- Affichage des erreurs -->
        <div *ngIf="errorMessage" class="alert alert-danger">
            {{ errorMessage }}
        </div>

        <form [formGroup]="userForm" (ngSubmit)="onSubmit()">
            <div class="mb-3">
                <label for="nom" class="form-label">Nom complet</label>
                <input type="text" id="nom" class="form-control" formControlName="nom" placeholder="Nom complet">
                <div *ngIf="userForm.get('nom')?.invalid && userForm.get('nom')?.touched" class="text-danger">
                    <small>Le nom est requis.</small>
                </div>
            </div>

            <div class="mb-3">
                <label for="email" class="form-label">Email</label>
                <input type="email" id="email" class="form-control" formControlName="email" placeholder="email@exemple.com">
                <div *ngIf="userForm.get('email')?.invalid && userForm.get('email')?.touched" class="text-danger">
                    <small *ngIf="userForm.get('email')?.errors?.['required']">Email requis.</small>
                    <small *ngIf="userForm.get('email')?.errors?.['email']">Format invalide.</small>
                </div>
            </div>

            <div class="mb-3">
                <label for="motDePasse" class="form-label">Mot de passe</label>
                <input type="password" id="motDePasse" class="form-control" formControlName="motDePasse"
                       placeholder="Minimum 6 caractères">
                <div *ngIf="userForm.get('motDePasse')?.invalid && userForm.get('motDePasse')?.touched" class="text-danger">
                    <small *ngIf="userForm.get('motDePasse')?.errors?.['required']">Mot de passe requis.</small>
                    <small *ngIf="userForm.get('motDePasse')?.errors?.['minlength']">Minimum 6 caractères.</small>
                </div>
            </div>

            <!-- Champ confirmPassword ajouté -->
            <div class="mb-3">
                <label for="confirmPassword" class="form-label">Confirmer le mot de passe</label>
                <input type="password" id="confirmPassword" class="form-control" formControlName="confirmPassword"
                       placeholder="Confirmez le mot de passe">
                <div *ngIf="userForm.hasError('mismatch') && userForm.get('confirmPassword')?.touched" class="text-danger">
                    <small>Les mots de passe ne correspondent pas.</small>
                </div>
            </div>

            <div class="mb-3">
                <label for="telephone" class="form-label">Téléphone</label>
                <input type="tel" id="telephone" class="form-control" formControlName="telephone"
                       placeholder="Numéro de téléphone">
            </div>

            <div class="mb-3">
                <label for="adresse" class="form-label">Adresse</label>
                <textarea id="adresse" class="form-control" formControlName="adresse" rows="2"
                          placeholder="Adresse complète"></textarea>
            </div>

            <div class="mb-3">
                <label for="role" class="form-label">Rôle</label>
                <select id="role" class="form-select" formControlName="role">
                    <option value="">Sélectionnez un rôle</option>
                    <option value="ROLE_ADMIN">Admin</option>
                    <option value="ROLE_PARTENAIRE">Partenaire</option>
                    <option value="ROLE_CLIENT">Client</option>
                </select>
                <div *ngIf="userForm.get('role')?.invalid && userForm.get('role')?.touched" class="text-danger">
                    <small>Le rôle est requis.</small>
                </div>
            </div>

            <!-- Case à cocher "Actif immédiatement" -->
            <div class="mb-3">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" formControlName="actif" id="actif">
                    <label class="form-check-label" for="actif">
                        Actif immédiatement
                    </label>
                </div>
            </div>

            <button type="submit" class="btn btn-primary" [disabled]="userForm.invalid">Enregistrer</button>
        </form>
    </div>
</div>